<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec" xmlns:pf="http://www.daisy.org/ns/pipeline/functions" xmlns:f="http://www.daisy.org/ns/pipeline/internal-functions"
    stylesheet="file:/home/jostein/pipeline-modules/common-utils/file-utils/src/main/resources/xml/xslt/uri-functions.xsl">

    <x:scenario pending="Not yet implemented" label="Scenario for testing function tokenize-uri">
        <x:call function="pf:tokenize-uri">
            <x:param name="uri" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function recompose-uri">
        <x:call function="pf:recompose-uri">
            <x:param name="tokens" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function is-absolute">
        <x:call function="pf:is-absolute">
            <x:param name="uri" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function is-relative">
        <x:call function="pf:is-relative">
            <x:param name="uri" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function get-path">
        <x:call function="pf:get-path">
            <x:param name="uri" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function get-extension">
        <x:call function="pf:get-extension">
            <x:param name="uri" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function replace-path">
        <x:call function="pf:replace-path">
            <x:param name="uri" select="''"/>
            <x:param name="path" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function normalize-uri">
        <x:call function="pf:normalize-uri">
            <x:param name="uri" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function relativize-uri">
        <x:call function="pf:relativize-uri">
            <x:param name="uri" select="''"/>
            <x:param name="base" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function normalize-path">
        <x:call function="pf:normalize-path">
            <x:param name="path" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function relativize-path">
        <x:call function="pf:relativize-path">
            <x:param name="path" select="''"/>
            <x:param name="base" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function longest-common-uri">
        <x:call function="pf:longest-common-uri">
            <x:param name="uris" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario label="Scenario for testing function percent-decode">
        <x:call function="pf:percent-decode"/>
        <x:scenario label="empty">
            <x:call>
                <x:param name="in" select="''"/>
            </x:call>
            <x:expect label="empty" select="''"/>
        </x:scenario>
        <x:scenario label="lone percent">
            <x:call>
                <x:param name="in" select="'%25'"/>
            </x:call>
            <x:expect label="lone percent" select="'%'"/>
        </x:scenario>
        <x:scenario label="double percent">
            <x:call>
                <x:param name="in" select="'%25%25'"/>
            </x:call>
            <x:expect label="double percent" select="'%%'"/>
        </x:scenario>
        <x:scenario label="whitespace">
            <x:call>
                <x:param name="in" select="'%20%0d%0a%09'"/>
            </x:call>
            <x:expect label="whitespace" select="' &#x0d;&#x0a;&#x09;'"/>
        </x:scenario>
        <x:scenario label="unreserved">
            <x:call>
                <x:param name="in" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~'"/>
            </x:call>
            <x:expect label="unreserved" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~'"/>
        </x:scenario>
        <x:scenario label="long">
            <x:call>
                <x:param name="in" select="string-join(for $i in (1 to 1000) return '%20xyz%20','')"/>
            </x:call>
            <x:expect label="long" select="string-join(for $i in (1 to 1000) return ' xyz ','')"/>
        </x:scenario>
        <x:scenario label="ampersand">
            <x:call>
                <x:param name="in" select="'%26'"/>
            </x:call>
            <x:expect label="ampersand" select="'&amp;'"/>
        </x:scenario>
        <x:scenario label="symbols">
            <x:call>
                <x:param name="in" select="'%21%22%23%24%25%26%27%28%29%2a%2b%2c-.%2f%3a%3b%3c%3d%3e%3f%40%5b%5c%5d%5e_%60%7b%7c%7d~'"/>
            </x:call>
            <x:expect label="symbols" select="concat('!&quot;#$%&amp;',&quot;&apos;&quot;,'()*+,-./:;&lt;=&gt;?@[\]^_`{|}~')"/>
        </x:scenario>
        <x:scenario label="unicode decode">
            <x:call>
                <x:param name="in" select="'%e2%80%9cAha%e2%80%9d'"/>
            </x:call>
            <x:expect label="unicode decode" select="'“Aha”'"/>
        </x:scenario>
        <x:scenario label="upper hex">
            <x:call>
                <x:param name="in" select="'%2A%2B%2C%3D%3E%2F'"/>
            </x:call>
            <x:expect label="upper hex" select="'*+,=&gt;/'"/>
        </x:scenario>
        <x:scenario label="lower hex">
            <x:call>
                <x:param name="in" select="'%2a%2b%2c%3d%3e%2f'"/>
            </x:call>
            <x:expect label="lower hex" select="'*+,=&gt;/'"/>
        </x:scenario>
        <!-- TODO: what to do with characters not allowed in XML? don't decode? remove? -->
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function f:percent-decode">
        <x:call function="f:percent-decode">
            <x:param name="in" select="''"/>
            <x:param name="seq" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function hex-to-dec">
        <x:call function="f:hex-to-dec">
            <x:param name="hex" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

    <x:scenario label="Scenario for testing function unescape-uri">
        <x:call function="pf:unescape-uri"/>
        <x:scenario label="empty">
            <x:call>
                <x:param name="in" select="''"/>
            </x:call>
            <x:expect label="empty" select="''"/>
        </x:scenario>
        <x:scenario label="lone percent">
            <x:call>
                <x:param name="in" select="'%25'"/>
            </x:call>
            <x:expect label="lone percent" select="'%'"/>
        </x:scenario>
        <x:scenario label="double percent">
            <x:call>
                <x:param name="in" select="'%25%25'"/>
            </x:call>
            <x:expect label="double percent" select="'%%'"/>
        </x:scenario>
        <x:scenario label="whitespace">
            <x:call>
                <x:param name="in" select="'%20%0d%0a%09'"/>
            </x:call>
            <x:expect label="whitespace" select="' &#x0d;&#x0a;&#x09;'"/>
        </x:scenario>
        <x:scenario label="unreserved">
            <x:call>
                <x:param name="in" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~'"/>
            </x:call>
            <x:expect label="unreserved" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.~'"/>
        </x:scenario>
        <x:scenario label="long">
            <x:call>
                <x:param name="in" select="string-join(for $i in (1 to 1000) return '%20xyz%20','')"/>
            </x:call>
            <x:expect label="long" select="string-join(for $i in (1 to 1000) return ' xyz ','')"/>
        </x:scenario>
        <x:scenario label="ampersand">
            <x:call>
                <x:param name="in" select="'%26'"/>
            </x:call>
            <x:expect label="ampersand" select="'&amp;'"/>
        </x:scenario>
        <x:scenario label="symbols">
            <x:call>
                <x:param name="in" select="'%21%22%23%24%25%26%27%28%29%2a%2b%2c-.%2f%3a%3b%3c%3d%3e%3f%40%5b%5c%5d%5e_%60%7b%7c%7d~'"/>
            </x:call>
            <x:expect label="symbols" select="concat('!&quot;#$%&amp;',&quot;&apos;&quot;,'()*+,-./:;&lt;=&gt;?@[\]^_`{|}~')"/>
        </x:scenario>
        <x:scenario label="unicode decode">
            <x:call>
                <x:param name="in" select="'%e2%80%9cAha%e2%80%9d'"/>
            </x:call>
            <x:expect label="unicode decode" select="'“Aha”'"/>
        </x:scenario>
        <x:scenario label="upper hex">
            <x:call>
                <x:param name="in" select="'%2A%2B%2C%3D%3E%2F'"/>
            </x:call>
            <x:expect label="upper hex" select="'*+,=&gt;/'"/>
        </x:scenario>
        <x:scenario label="lower hex">
            <x:call>
                <x:param name="in" select="'%2a%2b%2c%3d%3e%2f'"/>
            </x:call>
            <x:expect label="lower hex" select="'*+,=&gt;/'"/>
        </x:scenario>
        <!-- TODO: what to do with characters not allowed in XML? don't decode? remove? -->
    </x:scenario>

    <x:scenario pending="Not yet implemented" label="Scenario for testing function utf8-decode">
        <x:call function="pf:utf8-decode">
            <x:param name="bytes" select="''"/>
        </x:call>
        <x:expect label="Not yet implemented" select="'Not yet implemented'"/>
    </x:scenario>

</x:description>
